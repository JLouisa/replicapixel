<!-- prettier-ignore -->
{% set studio_partial_link = website.website_routes.dashboard_routes.sidebar.photo_partial | safe %}
{% set studio_link = website.website_routes.dashboard_routes.sidebar.photo | safe %}
{% set pack_link = website.website_routes.packs_routes.gen_pack | safe %}

<div
  class="w-fit mx-auto grid grid-cols-1 lg:grid-cols-4 md:grid-cols-2 justify-items-center justify-center gap-y-20 gap-x-14 mt-10 mb-5"
>
  {% for pack in packs %}
  <!-- Pack - Starts Here -->
  <div
    class="w-72 bg-base-100 shadow-md rounded-xl duration-500 hover:scale-105 hover:shadow-xl cursor-pointer"
    onclick="document.getElementById('modal-{{ pack.pid }}').showModal()"
  >
    <img src="{{ pack.image_url }}" alt="pack" class="h-80 w-72 object-cover rounded-t-xl" />
    <div class="px-4 py-3 w-72">
      <p class="text-lg text-center font-bold truncate block capitalize">{{ pack.title }}</p>
      <p>{{ pack.short_description }}</p>
      <div class="flex items-center justify-between">
        <span class="text-gray-400 mr-3 uppercase text-xs"> {{ pack.num_images }} Photos </span>
        <div class="flex items-center justify-center">
          <span> {% include "partials/svg/credit_svg.html" %} </span>
          <span class="text-gray-700 mr-3 uppercase text-xs"> {{ pack.credits }} </span>
        </div>
      </div>
      <div class="ml-auto"></div>
    </div>
  </div>

  <!-- You can open the modal using ID.showModal() method -->
  <dialog id="modal-{{ pack.pid }}" class="modal">
    <div class="modal-box max-w-7xl relative">
      <button
        class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2"
        onclick="document.getElementById('modal-{{ pack.pid }}').close()"
      >
        {% include "partials/svg/x.html" %}
      </button>
      <div class="bg-base-100">
        <div class="container mx-auto px-4 py-8">
          <div class="flex mx-4">
            <!-- Product Images -->
            <div class="w-full md:w-1/2 px-4 mb-8">
              <!-- Main Image -->
              <img
                src="https://replicapixel-dev.s3.eu-central-1.amazonaws.com/ab5e796c-a2cd-458e-ad6b-c3a898f44bd1/images/319ceeb2-d1d1-4cc2-870c-60bcf7a28efc.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIA6GBMCYSZW4R7LHR4%2F20250509%2Feu-central-1%2Fs3%2Faws4_request&X-Amz-Date=20250509T183913Z&X-Amz-Expires=86400&X-Amz-SignedHeaders=host&X-Amz-Signature=f26f9d2f808452d549595b7f2ab3809330ed198a42f229c913f6aa0324c40226"
                alt="Product"
                class="w-full h-auto object-cover rounded-lg shadow-lg mb-4"
                id="mainImage-{{ pack.pid }}"
              />
              <!-- Thumbnails -->
              <div class="flex gap-4 py-4 justify-center overflow-x-auto">
                <img
                  src="https://replicapixel-dev.s3.eu-central-1.amazonaws.com/ab5e796c-a2cd-458e-ad6b-c3a898f44bd1/images/09ebf02b-67f9-452e-a682-e6ec80668bc9.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIA6GBMCYSZW4R7LHR4%2F20250509%2Feu-central-1%2Fs3%2Faws4_request&X-Amz-Date=20250509T183913Z&X-Amz-Expires=86400&X-Amz-SignedHeaders=host&X-Amz-Signature=dadc989275cd16daba2e2995b1e392cc29e187c67f306c41c6a0286835b3f625"
                  alt="Thumbnail 1"
                  class="w-24 h-24 object-cover rounded-md cursor-pointer duration-300 ease-in-out hover:scale-105 flex-shrink-0"
                  onclick="changeImage('mainImage-{{ pack.pid }}',this.src)"
                />
                <img
                  src="https://replicapixel-dev.s3.eu-central-1.amazonaws.com/ab5e796c-a2cd-458e-ad6b-c3a898f44bd1/images/a47fd1cb-2a41-4175-bff4-1a7291bd4a29.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIA6GBMCYSZW4R7LHR4%2F20250509%2Feu-central-1%2Fs3%2Faws4_request&X-Amz-Date=20250509T105446Z&X-Amz-Expires=86400&X-Amz-SignedHeaders=host&X-Amz-Signature=eef7ca52acb937c09921458f77df73ec23324e5cd9cbb2e2dbfcffed4c17b60a"
                  alt="Thumbnail 2"
                  class="w-24 h-24 object-cover rounded-md cursor-pointer duration-300 ease-in-out hover:scale-105 flex-shrink-0"
                  onclick="changeImage('mainImage-{{ pack.pid }}',this.src)"
                />
                <img
                  src="https://replicapixel-dev.s3.eu-central-1.amazonaws.com/ab5e796c-a2cd-458e-ad6b-c3a898f44bd1/images/73aaf140-bc84-40d2-b41f-be4a718cfa3c.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIA6GBMCYSZW4R7LHR4%2F20250509%2Feu-central-1%2Fs3%2Faws4_request&X-Amz-Date=20250509T105446Z&X-Amz-Expires=86400&X-Amz-SignedHeaders=host&X-Amz-Signature=f4d1c6a2bebd27067156f90e0b1b8bdb438b6549d9fe4be5c49933424d2db1dd"
                  alt="Thumbnail 1"
                  class="w-24 h-24 object-cover rounded-md cursor-pointer duration-300 ease-in-out hover:scale-105 flex-shrink-0"
                  onclick="changeImage('mainImage-{{ pack.pid }}',this.src)"
                />
                <img
                  src="https://replicapixel-dev.s3.eu-central-1.amazonaws.com/ab5e796c-a2cd-458e-ad6b-c3a898f44bd1/images/73aaf140-bc84-40d2-b41f-be4a718cfa3c.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIA6GBMCYSZW4R7LHR4%2F20250509%2Feu-central-1%2Fs3%2Faws4_request&X-Amz-Date=20250509T105446Z&X-Amz-Expires=86400&X-Amz-SignedHeaders=host&X-Amz-Signature=f4d1c6a2bebd27067156f90e0b1b8bdb438b6549d9fe4be5c49933424d2db1dd"
                  alt="Thumbnail 2"
                  class="w-24 h-24 object-cover rounded-md cursor-pointer duration-300 ease-in-out hover:scale-105 flex-shrink-0"
                  onclick="changeImage('mainImage-{{ pack.pid }}',this.src)"
                />
                <img
                  src="https://replicapixel-dev.s3.eu-central-1.amazonaws.com/ab5e796c-a2cd-458e-ad6b-c3a898f44bd1/images/a136bc8b-d512-4b6e-b0d1-afc1be9ebdd6.jpg?x-id=GetObject&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=AKIA6GBMCYSZW4R7LHR4%2F20250509%2Feu-central-1%2Fs3%2Faws4_request&X-Amz-Date=20250509T074151Z&X-Amz-Expires=86400&X-Amz-SignedHeaders=host&X-Amz-Signature=0636804745df577e0db33f99562fc1341c7d4f38fb3368748d8e31b2907b8269"
                  alt="Thumbnail 1"
                  class="w-24 h-24 object-cover rounded-md cursor-pointer duration-300 ease-in-out hover:scale-105 flex-shrink-0"
                  onclick="changeImage('mainImage-{{ pack.pid }}',this.src)"
                />
              </div>
            </div>

            <!-- Product Details -->
            <div class="w-full md:w-1/2 px-4">
              <h2 class="text-5xl font-bold mb-2">{{ pack.title }}</h2>
              <div class="flex items-center justify-between">
                {% include "partials/svg/star.html" %} {% include "partials/svg/star.html" %} {%
                include "partials/svg/star.html" %} {% include "partials/svg/star.html" %} {%
                include "partials/svg/star.html" %} {#
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                  class="size-6 text-yellow-500"
                >
                  <path
                    fill-rule="evenodd"
                    d="M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.006 5.404.434c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.434 2.082-5.005Z"
                    clip-rule="evenodd"
                  />
                </svg>
                #}
              </div>
              <div class="mb-4 flex justify-end items-center gap-2">
                <div class="badge badge-dash badge-secondary">Popular</div>
                <div class="badge badge-dash badge-info">120x Used</div>
              </div>
              <p class="text-base-700 mb-6 text-start">{{pack.full_description}}</p>
              <div class="w-full flex items-center justify-start gap-7 text-sm mb-6">
                <div class="flex items-center justify-center gap-2">
                  {% include "partials/svg/credit_svg.html" %}
                  <span class="font-medium text-lg">{{ pack.credits }}</span>
                </div>
                <div class="flex items-center justify-center gap-2">
                  {% include "partials/svg/image.html" %}
                  <span class="font-medium text-lg">{{ pack.num_images }}</span>
                </div>
              </div>
              <div>
                <h3 class="text-lg font-semibold mb-2">Key Features:</h3>
                <ul class="list-disc list-inside text-gray-700">
                  <li>Industry-leading noise cancellation</li>
                  <li>30-hour battery life</li>
                  <li>Touch sensor controls</li>
                  <li>Speak-to-chat technology</li>
                </ul>
              </div>
              <form
                id="form-{{ pack.pid }}"
                hx-post="{{ pack_link }}/{{ pack.pid }}"
                hx-target="#dashboard_content"
                hx-push-url="{{ studio_link }}"
                hx-swap="innerHTML"
                hx-ext="form-json"
                hx-disabled-elt="#submit-btn-{{ pack.pid }}, #cancel-btn-{{ pack.pid }}"
                class="mt-6 space-y-4"
              >
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div class="form-control w-full">
                    <label for="model_pid-{{ pack.pid }}" class="label"> </label>
                    <select
                      id="model_pid-{{ pack.pid }}"
                      name="model_pid"
                      class="placeholder-black appearance-none cursor-pointer border pl-12 border-gray-100 shadow-sm focus:shadow-md focus:placeholder-gray-600 transition rounded-md w-full py-3 text-gray-600 leading-tight focus:outline-none focus:ring-gray-600 focus:shadow-outline"
                      required
                    >
                      <option value="" disabled selected>Select Model</option>
                      {% for training in models %} {% if training.training_status == "Completed" %}
                      <option value="{{ training.pid }}">{{ training.name }}</option>
                      {% endif %} {% endfor %}
                    </select>
                    <div class="absolute left-0 inset-y-0 flex items-center"></div>
                  </div>

                  <div class="form-control w-full">
                    <label for="image_size-{{ pack.pid }}" class="label"> </label>
                    <select
                      id="image_size-{{ pack.pid }}"
                      name="image_size"
                      class="appearance-none cursor-pointer border pl-12 border-gray-100 shadow-sm focus:shadow-md focus:placeholder-gray-600 transition rounded-md w-full py-3 text-gray-600 leading-tight focus:outline-none focus:ring-gray-600 focus:shadow-outline"
                      required
                    >
                      <option value="" disabled selected>Select Image Size</option>
                      {% for image_size in website.website_fields.image_sizes %} {% if not loop.last
                      %}
                      <option value="{{ image_size.0 }}">{{ image_size.1 }}</option>
                      {% endif %} {% endfor %}
                    </select>
                    <div class="absolute left-0 inset-y-0 flex items-center"></div>
                  </div>
                </div>
                {#
                <div>
                  <label
                    for="image_size-{{ pack.pid }}"
                    class="block text-xs mb-1 text-base-content/70"
                  >
                    Image Size
                  </label>
                  <select
                    id="image_size-{{ pack.pid }}"
                    name="image_size"
                    class="appearance-none cursor-pointer border pl-12 border-gray-100 shadow-sm focus:shadow-md focus:placeholder-gray-600 transition rounded-md w-full py-3 text-gray-600 leading-tight focus:outline-none focus:ring-gray-600 focus:shadow-outline"
                    required
                  >
                    {% for image_size in website.website_fields.image_sizes %} {% if not loop.last
                    %}
                    <option value="{{ image_size.0 }}">{{ image_size.1 }}</option>
                    {% endif %} {% endfor %}
                  </select>
                </div>

                <div>
                  <label
                    for="model_pid-{{ pack.pid }}"
                    class="block text-xs mb-1 text-base-content/70"
                  >
                    Select Model
                  </label>
                  <select
                    id="model_pid-{{ pack.pid }}"
                    name="model_pid"
                    class="appearance-none cursor-pointer border pl-12 border-gray-100 shadow-sm focus:shadow-md focus:placeholder-gray-600 transition rounded-md w-full py-3 text-gray-600 leading-tight focus:outline-none focus:ring-gray-600 focus:shadow-outline"
                    required
                  >
                    {% for training in models %} {% if training.training_status == "Completed" %}
                    <option value="{{ training.pid }}">{{ training.name }}</option>
                    {% endif %} {% endfor %}
                  </select>
                </div>
                #}
              </form>

              {#
              <div class="mb-6">
                <h3 class="text-lg font-semibold mb-2">Color:</h3>
                <div class="flex space-x-2">
                  <button
                    class="w-8 h-8 bg-black rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-black"
                  ></button>
                  <button
                    class="w-8 h-8 bg-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-300"
                  ></button>
                  <button
                    class="w-8 h-8 bg-blue-500 rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"
                  ></button>
                </div>
              </div>
              #}
            </div>
          </div>
        </div>
      </div>

      <div class="modal-action mt-6">
        <button
          id="submit-btn-{{ pack.pid }}"
          class="btn btn-primary"
          type="submit"
          form="form-{{ pack.pid }}"
        >
          Generate
        </button>
      </div>
    </div>
    <form method="dialog" class="modal-backdrop">
      <button>close</button>
    </form>
  </dialog>

  {#
  <dialog id="{{ pack.pid }}" class="modal">
    <div class="modal-box max-w-2xl">
      <h3 class="text-lg font-bold">Configure Pack: {{ pack.title }}</h3>
      <p>{{ pack.full_description }}</p>
      <p class="py-4">
        Select your desired image size and model, then click "Generate" to proceed. Press ESC or
        click "Cancel" to close.
      </p>
      <form
        id="form-{{ pack.pid }}"
        hx-post="{{ pack_link }}/{{ pack.pid }}"
        hx-target="#dashboard_content"
        hx-push-url="{{ studio_link }}"
        hx-swap="innerHTML"
        hx-ext="form-json"
        hx-disabled-elt="#submit-btn-{{ pack.pid }}, #cancel-btn-{{ pack.pid }}"
        class="mt-6 space-y-4"
      >
        <div>
          <label for="image_size-{{ pack.pid }}" class="block text-xs mb-1 text-base-content/70">
            Image Size
          </label>
          <select
            id="image_size-{{ pack.pid }}"
            name="image_size"
            class="appearance-none cursor-pointer border pl-12 border-gray-100 shadow-sm focus:shadow-md focus:placeholder-gray-600 transition rounded-md w-full py-3 text-gray-600 leading-tight focus:outline-none focus:ring-gray-600 focus:shadow-outline"
            required
          >
            {% for image_size in website.website_fields.image_sizes %} {% if not loop.last %}
            <option value="{{ image_size.0 }}">{{ image_size.1 }}</option>
            {% endif %} {% endfor %}
          </select>
        </div>

        <div>
          <label for="model_pid-{{ pack.pid }}" class="block text-xs mb-1 text-base-content/70">
            Select Model
          </label>
          <select
            id="model_pid-{{ pack.pid }}"
            name="model_pid"
            class="appearance-none cursor-pointer border pl-12 border-gray-100 shadow-sm focus:shadow-md focus:placeholder-gray-600 transition rounded-md w-full py-3 text-gray-600 leading-tight focus:outline-none focus:ring-gray-600 focus:shadow-outline"
            required
          >
            {% for training in models %} {% if training.training_status == "Completed" %}
            <option value="{{ training.pid }}">{{ training.name }}</option>
            {% endif %} {% endfor %}
          </select>
        </div>
      </form>

      <div class="modal-action mt-6">
        <form method="dialog" class="flex gap-2">
          <button id="cancel-btn-{{ pack.pid }}" class="btn btn-ghost">Cancel</button>
          <button
            id="submit-btn-{{ pack.pid }}"
            class="btn btn-primary"
            type="submit"
            form="form-{{ pack.pid }}"
          >
            Generate
          </button>
        </form>
      </div>
    </div>
  </dialog>
  #} {% endfor %}
  <script>
    function changeImage(id, src) {
      document.getElementById(id).src = src;
    }
  </script>
</div>
